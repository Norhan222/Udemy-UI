<nav class="navbar navbar-udemy">
  <div class="navbar-container">
    <div class="navbar-content">
      <!-- Hamburger Menu -->
      <button class="hamburger-menu" (click)="toggleMobileMenu()">
        <i class="bi bi-list"></i>
      </button>


      <!-- Logo -->
      <a class="navbar-brand" routerLink="/Home">
        <img src="https://www.udemy.com/staticx/udemy/images/v7/logo-udemy.svg" alt="Udemy" />
      </a>

      <!-- Explore Link -->
      <!-- <a href="#" class="nav-link-explore">Explore</a> -->
      <app-explore-menu></app-explore-menu>


      <!-- Search Bar -->
      <div class="search-container">
        <form class="search-form" (submit)="onSearch($event)">
          <i class="fas fa-search search-icon"></i>
          <input type="text" class="search-input" [placeholder]="'HOME.SEARCH_PLACEHOLDER' | translate" name="q"
            [(ngModel)]="searchQuery">
        </form>
      </div>
      <!-- Navigation Links -->
      <div class="nav-links">
        <a href="#" class="nav-link-text">{{ 'NAV.PLANS_PRICING' | translate }}</a>
        <a href="#" class="nav-link-text">{{ 'NAV.UDEMY_BUSINESS' | translate }}</a>
        @if(!(isLoggdIn$ |async)){
        <a href="#" class="nav-link-text">{{ 'NAV.TEACH_ON_UDEMY' | translate }}</a>
        }
        @if((isLoggdIn$ |async)){
        @if(user.role==='Instructor'){
        <a routerLink="/dashboard/courses" class="nav-link-text">{{ 'NAV.INSTRUCTOR' | translate }}</a>
        }
        @if(user.role==='Student'){
        <a routerLink="/my-learning" class="nav-link-text">{{ 'NAV.MY_LEARNING' | translate }}</a>
         <!-- Cart Icon -->
      <div class="nav-icons">
        <a class="cart-icon" (click)="goToCart()">
          <i class="bi bi-cart3"></i>
        </a>
      </div>
        }
        }
      </div>

     


      @if(!(isLoggdIn$ |async)){
      <!-- Login Button -->
      <a class="btn-login" routerLink="Login">{{ 'HOME.LOG_IN' | translate }}</a>

      <!-- Sign up Button -->
      <a class="btn-signup" routerLink="Register">{{ 'HOME.SIGN_UP' | translate }}</a>

      <!-- Language Icon -->
      <a href="#" class="lang-icon">
        <i class="fas fa-globe"></i>
      </a>
      }
      @if((isLoggdIn$ |async)){
      <!-- <div class="profile">
                <span class="avatar">NA</span>

              </div> -->
      <app-user-menu></app-user-menu>
      }
      <!-- Avatar -->


    </div>


    <!-- Mobile Menu -->
    <!-- Mobile Hamburger Dropdown -->
    <div class="mobile-drawer" [class.open]="mobileMenuOpen">

      <div class="mobile-header">
        <span>Browse</span>
        <button class="close-btn" (click)="toggleMobileMenu()">âœ•</button>
      </div>

      @if(!(isLoggdIn$ |async)){
      <div class="mobile-auth-buttons">
        <a routerLink="/Login" class="mobile-auth-link login" (click)="toggleMobileMenu()">{{ 'HOME.LOG_IN' | translate
          }}</a>
        <a routerLink="/Register" class="mobile-auth-link signup" (click)="toggleMobileMenu()">{{ 'HOME.SIGN_UP' |
          translate }}</a>
      </div>
      }
      <div class="mobile-section">

        <!-- Development -->
        <button class="mobile-category" (click)="toggleCategory('development')">
          Development
          <i class="bi" [class.bi-chevron-down]="!openCategory.development"
            [class.bi-chevron-up]="openCategory.development"></i>
        </button>
        <div class="mobile-submenu" *ngIf="openCategory.development">
          <a routerLink="/category/web-development">Web Development</a>
          <a routerLink="/category/mobile-development">Mobile Development</a>
          <a routerLink="/category/game-development">Game Development</a>
          <a routerLink="/category/programming-languages">Programming Languages</a>
        </div>

        <!-- Business -->
        <button class="mobile-category" (click)="toggleCategory('business')">
          Business
          <i class="bi" [class.bi-chevron-down]="!openCategory.business"
            [class.bi-chevron-up]="openCategory.business"></i>
        </button>
        <div class="mobile-submenu" *ngIf="openCategory.business">
          <a routerLink="/category/entrepreneurship">Entrepreneurship</a>
          <a routerLink="/category/management">Management</a>
          <a routerLink="/category/finance">Finance</a>
        </div>

        <!-- IT & Software -->
        <button class="mobile-category" (click)="toggleCategory('it')">
          IT & Software
          <i class="bi" [class.bi-chevron-down]="!openCategory.it" [class.bi-chevron-up]="openCategory.it"></i>
        </button>
        <div class="mobile-submenu" *ngIf="openCategory.it">
          <a routerLink="/category/it-certification">IT Certification</a>
          <a routerLink="/category/network-security">Network & Security</a>
          <a routerLink="/category/cloud-computing">Cloud Computing</a>
        </div>

        <!-- Office Productivity -->
        <button class="mobile-category" (click)="toggleCategory('office')">
          Office Productivity
          <i class="bi" [class.bi-chevron-down]="!openCategory.office" [class.bi-chevron-up]="openCategory.office"></i>
        </button>
        <div class="mobile-submenu" *ngIf="openCategory.office">
          <a routerLink="/category/excel">Microsoft Excel</a>
          <a routerLink="/category/google-tools">Google Workspace</a>
          <a routerLink="/category/project-management">Project Management</a>
        </div>

        <!-- Personal Development -->
        <button class="mobile-category" (click)="toggleCategory('personal')">
          Personal Development
          <i class="bi" [class.bi-chevron-down]="!openCategory.personal"
            [class.bi-chevron-up]="openCategory.personal"></i>
        </button>
        <div class="mobile-submenu" *ngIf="openCategory.personal">
          <a routerLink="/category/leadership">Leadership</a>
          <a routerLink="/category/time-management">Time Management</a>
          <a routerLink="/category/communication">Communication Skills</a>
        </div>

        <!-- Design -->
        <button class="mobile-category" (click)="toggleCategory('design')">
          Design
          <i class="bi" [class.bi-chevron-down]="!openCategory.design" [class.bi-chevron-up]="openCategory.design"></i>
        </button>
        <div class="mobile-submenu" *ngIf="openCategory.design">
          <a routerLink="/category/graphic-design">Graphic Design</a>
          <a routerLink="/category/ui-ux">UI / UX Design</a>
          <a routerLink="/category/3d-design">3D & Animation</a>
        </div>

        <!-- Marketing -->
        <button class="mobile-category" (click)="toggleCategory('marketing')">
          Marketing
          <i class="bi" [class.bi-chevron-down]="!openCategory.marketing"
            [class.bi-chevron-up]="openCategory.marketing"></i>
        </button>
        <div class="mobile-submenu" *ngIf="openCategory.marketing">
          <a routerLink="/category/digital-marketing">Digital Marketing</a>
          <a routerLink="/category/seo">SEO</a>
          <a routerLink="/category/social-media">Social Media Marketing</a>
        </div>

        <!-- Photography & Video -->
        <button class="mobile-category" (click)="toggleCategory('photo')">
          Photography & Video
          <i class="bi" [class.bi-chevron-down]="!openCategory.photo" [class.bi-chevron-up]="openCategory.photo"></i>
        </button>
        <div class="mobile-submenu" *ngIf="openCategory.photo">
          <a routerLink="/category/photography">Photography</a>
          <a routerLink="/category/video-editing">Video Editing</a>
          <a routerLink="/category/filmmaking">Filmmaking</a>
        </div>

        <!-- Lifestyle -->
        <button class="mobile-category" (click)="toggleCategory('lifestyle')">
          Lifestyle
          <i class="bi" [class.bi-chevron-down]="!openCategory.lifestyle"
            [class.bi-chevron-up]="openCategory.lifestyle"></i>
        </button>
        <div class="mobile-submenu" *ngIf="openCategory.lifestyle">
          <a routerLink="/category/fitness">Fitness</a>
          <a routerLink="/category/music">Music</a>
          <a routerLink="/category/travel">Travel</a>
        </div>

      </div>



    </div>

  </div>
</nav>

<!-- Bootstrap JS -->

<!--
    <script>
        // Search form submission
        const searchForm = document.querySelector('.search-form');
        searchForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const searchQuery = this.querySelector('.search-input').value;
            if (searchQuery.trim()) {
                console.log('Searching for: ' + searchQuery);
            }
        });

        // Mobile menu toggle
        const hamburgerBtn = document.getElementById('hamburgerBtn');
        const mobileMenu = document.getElementById('mobileMenu');

        hamburgerBtn.addEventListener('click', function() {
            mobileMenu.classList.toggle('show');
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(e) {
            if (!hamburgerBtn.contains(e.target) && !mobileMenu.contains(e.target)) {
                mobileMenu.classList.remove('show');
            }
        });

        // Close mobile menu when clicking on a menu item
        const mobileMenuItems = document.querySelectorAll('.mobile-menu-item');
        mobileMenuItems.forEach(item => {
            item.addEventListener('click', function() {
                mobileMenu.classList.remove('show');
            });
        });


        const exploreLink = document.getElementById('exploreLink');
          const exploreDropdown = document.getElementById('exploreDropdown');
          const exploreWrapper = document.querySelector('.explore-wrapper');

          if (exploreLink && exploreDropdown) {
            // Toggle dropdown on click
            exploreLink.addEventListener('click', function (e) {
              e.preventDefault();
              const isOpen = exploreDropdown.classList.contains('show');
              if (isOpen) {
                exploreDropdown.classList.remove('show');
                exploreLink.classList.remove('active');
              } else {
                exploreDropdown.classList.add('show');
                exploreLink.classList.add('active');
              }
            });
             document.addEventListener('click', function (e) {
              if (!exploreWrapper.contains(e.target)) {
                exploreDropdown.classList.remove('show');
                exploreLink.classList.remove('active');
              }
            });

            // Items in first column (categories)
            const categoryItems = document.querySelectorAll('.explore-item[data-category]');
            categoryItems.forEach(item => {
              item.addEventListener('click', function (e) {
                e.preventDefault();

                // remove active from all
                categoryItems.forEach(i => i.classList.remove('active'));
                this.classList.add('active');

                const submenuId = this.getAttribute('data-submenu');

                // hide all submenus + topics
                document.querySelectorAll('.explore-submenu').forEach(sub => sub.classList.remove('show'));
                document.querySelectorAll('.explore-topics').forEach(t => t.classList.remove('show'));

                // if has submenu (e.g. Development) -> show it and default topics
                if (submenuId) {
                  const submenu = document.getElementById(submenuId);
                  if (submenu) {
                    submenu.classList.add('show');
                  }

                  const defaultTopics = document.getElementById('webdev-topics');
                  if (defaultTopics) {
                    defaultTopics.classList.add('show');
                  }
                }
              });
            });

            // Items in second column (topics list)
            const topicItems = document.querySelectorAll('.explore-item[data-topic]');
            topicItems.forEach(item => {
              item.addEventListener('click', function (e) {
                e.preventDefault();

                // active state
                topicItems.forEach(i => i.classList.remove('active'));
                this.classList.add('active');

                const topicsId = this.getAttribute('data-topics');
                if (topicsId) {
                  document.querySelectorAll('.explore-topics').forEach(t => t.classList.remove('show'));
                  const topics = document.getElementById(topicsId);
                  if (topics) {
                    topics.classList.add('show');
                  }
                }
              });
            });
          }

    </script> -->