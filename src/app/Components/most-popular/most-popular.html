@if(courses == null)
{
  <div class="text-center text-primary">
  <div class="spinner-border" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>

}@else{
<section style="margin: 10px 0 50px 0; ">
  <p-carousel [value]="courses" [numVisible]="5" [numScroll]="1"
  [responsiveOptions]="responsiveOptions"
  (onPage)="op?.hide()">
  <ng-template let-product pTemplate="item" (onPage)="op?.hide()">
    <div style="margin:10px; background-color: white; display:flex">
      <button
         style="border: none; background: transparent;">
        <button
         [routerLink]="['/course', product.id]"
         style="border: none;background: transparent;"
         (mouseenter)="showPopover($event, product, op)"
         (mouseleave)="scheduleHide(op)">
          <img [src]="product.thumbnailUrl" alt="Course" class="course-image" style="width:100%">
          <div class="course-basic-info" style="text-align:start">
            <h3 class="course-title">{{product.title}}</h3>
            <p class="course-instructor">{{product.instructorName}}</p>
            <div class="course-rating">
              <span class="rating-value" style="color:rgb(173, 114, 4); font-weight: bold;">{{ product.rating }}</span>
              <p-rating [(ngModel)]="product.rating" [readonly]="true"></p-rating>
            </div>
            <div class="course-price">E&pound;{{product.price}}</div>
            <button type="button" style="background-color:#6d28d2;margin-top:10px;color:white;border-radius:2px;padding:2px">
              <i class="bi bi-patch-check"></i> Premium
            </button>
          </div>
        </button>
      </button>

      <!-- Popover -->
      <p-popover #op
           position="right"
           appendTo ="body"
           (mouseenter)="cancelHide()"
          (mouseleave)="scheduleHide(op)"
           [style]="{'z-index': 9999}">

  <div *ngIf="hoveredProduct"
       style="width:320px;padding:15px;background:white;
              border-radius:6px;
              box-shadow:0 2px 10px rgba(0,0,0,.2)">
         <h3 class="hover-title">{{hoveredProduct.title}}</h3>
            <button type="button" style="background-color:#6d28d2;margin-top:10px;color:white;border-radius:2px;padding:2px">
              <i class="bi bi-patch-check"></i> Premium
            </button>
            <p class="hover-description">
              Updated in {{hoveredProduct.lastUpdatedDate}}
            </p>
            <div class="hover-stats">
              <span>62 total hours</span>
              <span>•</span>
              <span>All Levels</span>
              <span>•</span>
              <span>Subtitles</span>
            </div>
            <ul class="hover-list">
              <li>Build 16 web development projects</li>
              <li>Learn the latest technologies</li>
              <li>Build a portfolio of websites</li>
            </ul>
         <div class="hover-buttons">
               <button type="button" class=" "
                    [disabled]="isInCart(hoveredProduct.id)"
                    (click)="addToCart(hoveredProduct.id)"
                    style="background-color:#5f2eaf; color:white;
                           padding:15px 50px 15px 50px; font-weight:bold ;">
                   <i class="bi bi-patch-check"></i>
                       {{ isInCart(hoveredProduct.id) ? 'Added to Cart' : 'Add to Cart' }}
                  </button>
                  <button (click)="addToWishlist(hoveredProduct.id)" style="border-radius: 50%; border:1px solid #5f2eaf; padding:10px; margin-left:15px; background-color:white">
                        @if(isInWishlist(hoveredProduct.id))
                        {
                           <i class="bi bi-heart-fill" style="color:#5f2eaf"></i>
                       }@else
                      {
                          <i class="bi bi-heart" style="color:#5f2eaf"></i>
                      }
                   </button>
            </div>
  </div>
</p-popover>

    </div>
  </ng-template>
</p-carousel>

</section>
}
